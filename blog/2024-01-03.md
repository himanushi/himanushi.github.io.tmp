今日は Pages の build で blog のリストを生成するスクリプトを開発する。今月はこの雑記をカスタマイズするかな。

奥さんは祖母の家に子供を連れて行ったので、開発しつつ家事をする。

流石に、コンポーネントの分割がうまくいかないので、超軽量のライブラリを探す。 preact でいくことにする。SPA で Github Pages をするのは少し面倒そう。404.html で root にリダイレクトするようにする。 `/blog/2024-01-01.html` -> `/#/blog/2024-01-01.html` 一旦ハッシュで挟む。やはりこういう基礎となるところを考えるのは楽しい。しかし、mdファイルを全てhtmlファイルに変換していたが、大量に雑記が増えるとbuildに時間がかかる。mdファイルはそのままコピーして、marked などで変換して表示する方法にしようかなぁ。

ChatGPT に相談するにもコードをいちいちコピーするの面倒なのでファイル一覧をコピーするスクリプトを書くぞ(書いてもらう)。

15:33

そしてほぼ家事ができていない。やばいぞこれは。

できた。ここに[記録がある](https://chat.openai.com/share/4ea06cb9-9c13-4542-b8b8-9fc9684044b7)。これは現在のプロジェクトをコピペするスクリプト。

16:25

ルーティングどうしよかな。404.html を index.html として使用するか。毎回 404 エラー発生するのやばそうだけど、とりあえずいいか。Github Pages で SPA は大変なんだなぁ。

17:21

家事を全くしていない。

Github Pages は無料だと 1GB の容量制限がある。そのため、 npm は全て CDN から読み込むようにする。これで容量を節約できる。ナイスですねぇ。

18:51

preact-router だけ CDN の対応だとうまくいかない。仕方ないので保留にする。

19:03

らーめん花月嵐を uber で頼んで今きたのでご飯。

20:12

base css は modern-normalize.css に決めた。これは normalize.css の fork で、normalize.css が古いブラウザに対応しているのに対して、modern-normalize.css は新しいブラウザに対応している。今時のブラウザであれば modern-normalize.css で十分だろう。tailwindcss でも採用しているのでこれでいい。

ちなみに、 lint, formatter は biomejs を使用する。前に、 Rome.tools というのがあったが、あれが廃止されて、 biomejs になった。

css はやはり tailwindcss にする。CDNで使用する。これで容量を節約できる。ナイスですねぇ。

20:30

ts で h 関数を使用してるとやはりダルいので、tsxで書くようにする。