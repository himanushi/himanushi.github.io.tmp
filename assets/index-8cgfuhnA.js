(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();var b,c,H,L,$=0,W=[],g=[],I=preact.options.__b,O=preact.options.__r,P=preact.options.diffed,k=preact.options.__c,R=preact.options.unmount;function q(t,e){preact.options.__h&&preact.options.__h(c,t,$||e),$=0;var o=c.__H||(c.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:g}),o.__[t]}function D(t){return $=1,G(V,t)}function G(t,e,o){var r=q(b++,2);if(r.t=t,!r.__c&&(r.__=[o?o(e):V(void 0,e),function(u){var _=r.__N?r.__N[0]:r.__[0],l=r.t(_,u);_!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=c,!c.u)){var n=function(u,_,l){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(s){return s.__c});if(d.every(function(s){return!s.__N}))return!i||i.call(this,u,_,l);var p=!1;return d.forEach(function(s){if(s.__N){var m=s.__[0];s.__=s.__N,s.__N=void 0,m!==s.__[0]&&(p=!0)}}),!(!p&&r.__c.props===u)&&(!i||i.call(this,u,_,l))};c.u=!0;var i=c.shouldComponentUpdate,a=c.componentWillUpdate;c.componentWillUpdate=function(u,_,l){if(this.__e){var d=i;i=void 0,n(u,_,l),i=d}a&&a.call(this,u,_,l)},c.shouldComponentUpdate=n}return r.__N||r.__}function K(t,e){var o=q(b++,3);!preact.options.__s&&X(o.__H,e)&&(o.__=t,o.i=e,c.__H.__h.push(o))}function J(){for(var t;t=W.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(y),t.__H.__h.forEach(A),t.__H.__h=[]}catch(e){t.__H.__h=[],preact.options.__e(e,t.__v)}}preact.options.__b=function(t){c=null,I&&I(t)},preact.options.__r=function(t){O&&O(t),b=0;var e=(c=t.__c).__H;e&&(H===c?(e.__h=[],c.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=g,o.__N=o.i=void 0})):(e.__h.forEach(y),e.__h.forEach(A),e.__h=[],b=0)),H=c},preact.options.diffed=function(t){P&&P(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(W.push(e)!==1&&L===preact.options.requestAnimationFrame||((L=preact.options.requestAnimationFrame)||Q)(J)),e.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==g&&(o.__=o.__V),o.i=void 0,o.__V=g})),H=c=null},preact.options.__c=function(t,e){e.some(function(o){try{o.__h.forEach(y),o.__h=o.__h.filter(function(r){return!r.__||A(r)})}catch(r){e.some(function(n){n.__h&&(n.__h=[])}),e=[],preact.options.__e(r,o.__v)}}),k&&k(t,e)},preact.options.unmount=function(t){R&&R(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{y(r)}catch(n){e=n}}),o.__H=void 0,e&&preact.options.__e(e,o.__v))};var w=typeof requestAnimationFrame=="function";function Q(t){var e,o=function(){clearTimeout(r),w&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(o,100);w&&(e=requestAnimationFrame(o))}function y(t){var e=c,o=t.__c;typeof o=="function"&&(t.__c=void 0,o()),c=e}function A(t){var e=c;t.__c=t.__(),c=e}function X(t,e){return!t||t.length!==e.length||e.some(function(o,r){return o!==t[r]})}function V(t,e){return typeof e=="function"?e(t):e}var Y={};function v(t,e){for(var o in e)t[o]=e[o];return t}function Z(t,e,o){var r,n=/(?:\?([^#]*))?(#.*)?$/,i=t.match(n),a={};if(i&&i[1])for(var u=i[1].split("&"),_=0;_<u.length;_++){var l=u[_].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=C(t.replace(n,"")),e=C(e||"");for(var d=Math.max(t.length,e.length),p=0;p<d;p++)if(e[p]&&e[p].charAt(0)===":"){var s=e[p].replace(/(^:|[+*?]+$)/g,""),m=(e[p].match(/[+*?]+$/)||Y)[0]||"",N=~m.indexOf("+"),x=~m.indexOf("*"),U=t[p]||"";if(!U&&!x&&(m.indexOf("?")<0||N)){r=!1;break}if(a[s]=decodeURIComponent(U),N||x){a[s]=t.slice(p).map(decodeURIComponent).join("/");break}}else if(e[p]!==t[p]){r=!1;break}return(o.default===!0||r!==!1)&&a}function tt(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:t.index-e.index}function et(t,e){return t.index=e,t.rank=function(o){return o.props.default?0:C(o.props.path).map(ot).join("")}(t),t.props}function C(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function ot(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var rt={},h=[],T=[],f=null,j={url:E()},nt=preact.createContext(j);function E(){var t;return""+((t=f&&f.location?f.location:f&&f.getCurrentLocation?f.getCurrentLocation():typeof location<"u"?location:rt).pathname||"")+(t.search||"")}function it(t,e){return e===void 0&&(e=!1),typeof t!="string"&&t.url&&(e=t.replace,t=t.url),function(o){for(var r=h.length;r--;)if(h[r].canRoute(o))return!0;return!1}(t)&&function(o,r){r===void 0&&(r="push"),f&&f[r]?f[r](o):typeof history<"u"&&history[r+"State"]&&history[r+"State"](null,null,o)}(t,e?"replace":"push"),B(t)}function B(t){for(var e=!1,o=0;o<h.length;o++)h[o].routeTo(t)&&(e=!0);return e}function at(t){if(t&&t.getAttribute){var e=t.getAttribute("href"),o=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!o||o.match(/^_?self$/i)))return it(e)}}function ct(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function ut(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var e=t.target;do if(e.localName==="a"&&e.getAttribute("href")){if(e.hasAttribute("data-native")||e.hasAttribute("native"))return;if(at(e))return ct(t)}while(e=e.parentNode)}}var F=!1;function z(t){t.history&&(f=t.history),this.state={url:t.url||E()}}v(z.prototype=new preact.Component,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var e=preact.toChildArray(this.props.children);return this.g(e,t)!==void 0},routeTo:function(t){this.setState({url:t});var e=this.canRoute(t);return this.p||this.forceUpdate(),e},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;F||(F=!0,f||addEventListener("popstate",function(){B(E())}),addEventListener("click",ut)),h.push(this),f&&(this.u=f.listen(function(e){var o=e.location||e;t.routeTo(""+(o.pathname||"")+(o.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),h.splice(h.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,e){t=t.filter(et).sort(tt);for(var o=0;o<t.length;o++){var r=t[o],n=Z(e,r.props.path,r.props);if(n)return[r,n]}},render:function(t,e){var o,r,n=t.onChange,i=e.url,a=this.c,u=this.g(preact.toChildArray(t.children),i);if(u&&(r=preact.cloneElement(u[0],v(v({url:i,matches:o=u[1]},o),{key:void 0,ref:void 0}))),i!==(a&&a.url)){v(j,a=this.c={url:i,previous:a&&a.url,current:r,path:r?r.props.path:null,matches:o}),a.router=this,a.active=r?[r]:[];for(var _=T.length;_--;)T[_]({});typeof n=="function"&&n(a)}return preact.h(nt.Provider,{value:a},r)}});var M=function(t){return preact.h(t.component,t)};const _t=({matches:t})=>{const[e,o]=D("");return K(()=>{const r=t.id;fetch(`/blog/${r}.md`).then(n=>n.text()).then(async n=>{const i=await marked.marked(n);o(i)}).catch(n=>console.error("Error loading blog post:",n))},[t.id]),preact.h("div",{dangerouslySetInnerHTML:{__html:e}})},pt=()=>{const[t,e]=D("");K(()=>{fetch(`/blog/blogList.txt?time=${Date.now()}`).then(r=>r.text()).then(r=>e(r)).catch(r=>console.error("Error loading blog list:",r))},[]);const o=t.split(`
`).map(r=>preact.h("li",{key:r},preact.h("a",{href:`/blog/${r}`},r)));return preact.h("div",{class:"underline"},preact.h("h1",null,"Himanushi 雑記"),preact.h("ul",null,o))},st=()=>preact.h(z,null,preact.h(M,{path:"/",component:pt}),preact.h(M,{path:"/blog/:id",component:_t,default:!0})),S=document.getElementById("app");S!==null&&preact.render(preact.h(st,null),S);
